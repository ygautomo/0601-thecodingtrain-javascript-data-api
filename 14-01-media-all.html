<!-- /**
 * Project: Working with Data and APIs in JavaScript
 * Filename: 14-01-media-all.html
 * Course: 01 The Coding Train -- Working with Data and APIs in JavaScript
 * Description: 01 The Coding Train -- Working with Data and APIs in JavaScript- 14 Saving Images and Base64 Encoding
 * Directory: D:\04 Work\03 Training Course\59 JavaScript\01 The Coding Train -- Working with Data and APIs in JavaScript
 * Reference Link: https://www.youtube.com/watch?v=q-lUgFxwjEM&list=PLRqwX-V7Uu6YxDKpFzf_2D84p0cyk4T7X&index=13
 * Repository: N/A
 * 
 * Author: Yugo Gautomo
 * Status: Final February 01, 2022
 */ -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>01 The Coding Train -- Working with Data and APIs in JavaScript- 13 Database Query</title>
</head>
<body>
  <h1>14 Saving Images and Base64 Encoding</h1>
  <h1>Data Selfie App</h1>
  <h2>14-01-media-all.html</h2>

  <div><a href="/14-01-index-link.html">Main Page</a> | <a href="/">Query All</a></div>
  <p>Query All, using Express.js</p>

  <script>
    // 00 clear the console
    // console.clear();

    // 01 async function fetchData()
    async function fetchData() {
      const response = await fetch('/api');
      const data = await response.json();

      for (item of data) {
        const root = document.createElement('div');
        const br = document.createElement("br");
        const food = document.createElement('div');
        const geo = document.createElement('div');
        const image = document.createElement('img');
        const date = document.createElement('div');
        const dateString = new Date(item.timestamp).toLocaleString();

        food.textContent = `food: ${item.strFood}`;
        geo.textContent = `latitude: ${item.latitude}° , longitude: ${item.longitude}°`;
        date.textContent = dateString;
        image.src = item.image64;
        root.append(food, geo, date, image, br);
        document.body.append(root);
      }

      console.log(data);
      return;
    }

    /* 01 main program or function main() to call async function fetchData() */
    console.log("01 main program or function main() to call async function fetchData()");
    fetchData();
  </script>
</body>
</html>

<!-- /* References: */
- Express.js (https://expressjs.com)
- Express.js, express.json() (https://expressjs.com/en/4x/api.html#express.json)
- Express.js, Hello World Example (https://expressjs.com/en/starter/hello-world.html)
- Express.js, Serving Static Files in Express (https://expressjs.com/en/starter/static-files.html)
- Mozilla Developer Network (MDN), References, Web APIs, Fetch API, Using the Fetch API (https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)
- Mozilla Developer Network (MDN), References, Web APIs, Geolocation API (https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API)
- Mozilla Developer Network (MDN), References, Web APIs, Request, Request.method (https://developer.mozilla.org/en-US/docs/Web/API/Request/method)
- NeDB (https://dbdb.io/db/nedb)
- NeDB (https://github.com/louischatriot/nedb)
- Node.js v18.3.0 Documentation, File System (https://nodejs.org/api/fs.html)
- p5.js (https://p5js.org) -->
